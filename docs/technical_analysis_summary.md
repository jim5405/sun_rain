# 技術指標分析說明

本文件旨在詳細說明此股票分析專案中所使用的各項技術指標，解釋其計算方式以及在我們的分析策略中的具體應用。

## 1. 移動平均線 (Moving Average, MA)

- **用途**: 判斷股價的長期與短期趨勢。
- **計算**:
  - `ma_short`: 短期簡單移動平均線。
  - `ma_long`: 長期簡單移動平均線。
- **應用**:
  - 當股價高於短期與長期均線，且短期均線高於長期均線時，視為多頭排列 (天氣狀態: ☀️ 晴天)。
  - 當股價低於短期與長期均線，且短期均線低於長期均線時，視為空頭排列 (天氣狀態: 🌧️ 雨天)。
  - 其他情況則視為盤整或趨勢不明 (天氣狀態: 🌥️ 多雲 / ☁️ 陰天)。

## 2. 相對強弱指數 (Relative Strength Index, RSI)

- **用途**: 衡量買賣盤的相對強度，判斷市場是否超買或超賣。
- **計算**:
  - `rsi_window`: 計算週期內，上漲日的平均漲幅與下跌日的平均跌幅的比值。
- **應用**:
  - 結合移動平均線，當 RSI 高於 `rsi_bull_threshold` (預設50) 時，加強多頭信號。
  - 當 RSI 低於 `rsi_bear_threshold` (預設40) 時，加強空頭信號。
  - 當 RSI 低於 `rsi_oversold` (預設30) 且均線為空頭排列時，市場可能進入極度超賣狀態 (天氣狀態: ⛈️ 颱風天)。

## 3. 指數平滑異同移動平均線 (MACD)

- **用途**: 捕捉股價的動能變化與趨勢轉折點。
- **計算**:
  - `MACD`: 快線 (`macd_fast`) 與慢線 (`macd_slow`) 的差值。
  - `MACD_signal`: MACD 的指數移動平均線。
  - `MACD_hist`: MACD 與其訊號線的差離值 (柱狀圖)。
- **應用**:
  - 在 `get_recovery_status` 函式中，當 `MACD_hist` > 0 (柱狀圖由負轉正) 時，被視為一個潛在的趨勢轉強信號，是構成「撥雲見日」買點的關鍵條件之一。

## 4. 最大回撤 (Drawdown)

- **用途**: 評估股價從近期高點下跌的幅度，衡量下行風險。
- **計算**:
  - 在 `drawdown_window` 週期內，當前價格與期間內最高價的百分比差異。
- **應用**:
  - 在 `get_recovery_status` 函式中，`Drawdown` 必須小於 `drawdown_no_rain` (預設-0.1，即-10%)，代表股價並未處於深度下跌趨勢中。
  - 同時，當前的 `Drawdown` 必須大於前一日的 `Drawdown`，這表示股價有從低點反彈的跡象。

## 5. 平均趨向指數 (Average Directional Index, ADX)

- **用途**: 衡量趨勢的「強度」，而非「方向」。
- **計算**:
  - 基於一段時間內價格的擴張範圍計算而來，涉及 `+DI` (上漲方向線) 和 `-DI` (下跌方向線)。
- **應用**:
  - 在 `get_recovery_status` 函式中，ADX 值必須大於 `adx_threshold` (預設25)，確保市場處於一個有明確趨勢的狀態下，而不是在無趨勢的盤整中。
  - `+DI` 必須大於 `-DI`，表明當前趨勢是偏向多方的。
  - ADX 的引入有助於過濾掉在盤整市場中可能出現的假訊號，增加買點的可靠性。

## 6. 布林通道 (Bollinger Bands, BB)

- **用途**: 衡量市場的波動性，並提供動態的支撐與壓力位。
- **計算**:
  - `bb_ma`: 中軌，通常為 20 期的簡單移動平均線。
  - `bb_upper`: 上軌，中軌 + (標準差 * `bb_std_dev`)。
  - `bb_lower`: 下軌，中軌 - (標準差 * `bb_std_dev`)。
- **應用**:
  - 在 `get_barometer_status` 函式中，布林通道被用來輔助判斷市場是否處於「過熱」或「恐慌」狀態。
  - 當股價在晴天 (強勢多頭) 狀態下突破上軌時，系統會提示「注意過熱」。
  - 當股價在颱風天 (極端空頭) 狀態下摜破下軌時，系統會提示「注意恐慌」。
  - 在一般趨勢中突破上下軌，則被視為趨勢增強的信號。
  - 此指標的加入，讓天氣狀態的判斷更為細膩，增加了對市場極端情緒的識別能力。
